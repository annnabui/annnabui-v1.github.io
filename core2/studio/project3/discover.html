<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover Data</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://use.typekit.net/ssz6abi.css">

    <script>
        fetch ('oyster.json')
        .then(response => response.json())
        .then(data => {

            // define const
            const tableone = document.getElementById('tableone');
            const buttonAll = document.getElementById('all');
            const buttonSeg8 = document.getElementById('seg8');
            const buttonSeg7 = document.getElementById('seg7');
            const buttonSeg6 = document.getElementById('seg6');
            const buttonSeg5 = document.getElementById('seg5');
            const buttonSeg4 = document.getElementById('seg4');
            const buttonSeg3 = document.getElementById('seg3');
            const buttonSeg2 = document.getElementById('seg2');
            const buttonSeg1 = document.getElementById('seg1');

            // loop
            data.forEach(item => {
                const div = document.createElement('div');
                div.classname = 'table'
                const p1 = document.createElement('p');
                p1.classname = 'title'
                const img = document.createElement('img');
                const p2 = document.createElement('p');
                p2.className = "details"
                const p3 = document.createElement('p');
                p3.className = "description"
                const p4 = document.createElement('p');
                p4.className = "analysis"

                p1.textContent = item.name;
                p2.textContent = item.first_appeared + " – " + item.last_appeared + Environment.NewLine + item.lowest_price + " – " + item.highest_price + Environment.NewLine + item.menus_appeared + "/" + item.total;
                p3.textContent = "Description" + Environment.NewLine + item.description;
                p4.textContent = "Analysis" + Environment.NewLine + item.analysis;
                img.src = "imgs/" + item.Image;

                if (item.Image == "no") {
                    img.style.display = "none";
                }

                //button
                buttonAll.addEventListener('click', function() {
                    div.style.display = "block";
                })
                buttonSeg1.addEventListener('click', function() {
                    if (item.first_appeared == "1851", "1852", "1853", "1854", "1855", "1856", "1857", "1858", "1859") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg2.addEventListener('click', function() {
                    if (item.first_appeared == "1860", "1861", "1862", "1863", "1864", "1865", "1866", "1867", "1868", "1869", "1870", "1871", "1872", "1873", "1874", "1875", "1876", "1877", "1878", "1879", "1880") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg3.addEventListener('click', function() {
                    if (item.first_appeared == "1881", "1882", "1883", "1884", "1885", "1886", "1887", "1888", "1889", "1890", "1891", "1892", "1893", "1894", "1895", "1896", "1897", "1898", "1899", "1900", "1901") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg4.addEventListener('click', function() {
                    if (item.first_appeared == "1902", "1903", "1904", "1905", "1906", "1907", "1908", "1909", "1910", "1911", "1912", "1913", "1914", "1915", "1916", "1917", "1918", "1919", "1920", "1921", "1922") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg5.addEventListener('click', function() {
                    if (item.first_appeared == "1923", "1924", "1925", "1926", "1927", "1928", "1929", "1930", "1931", "1932", "1933", "1934", "1935", "1936", "1937", "1938", "1939", "1940", "1941", "1942", "1943") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg6.addEventListener('click', function() {
                    if (item.first_appeared == "1944", "1945", "1946", "1947", "1948", "1949", "1950", "1951", "1952", "1953", "1954", "1955", "1956", "1957", "1958", "1959", "1960", "1961", "1962", "1963", "1964") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg7.addEventListener('click', function() {
                    if (item.first_appeared == "1965", "1966", "1967", "1968", "1969", "1970", "1971", "1972", "1973", "1974", "1975", "1976", "1977", "1978", "1979", "1980", "1981", "1982", "1983", "1984", "1985") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })
                buttonSeg8.addEventListener('click', function() {
                    if (item.first_appeared == "1986", "1987", "1988", "1989", "1990", "1991", "1992", "1993", "1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001", "2002", "2003", "2004", "2005", "2006") {
                        div.style.display = "block";
                    } else {
                        div.style.display = "none";
                    }
                })

                // display elements
                div.appendChild(p1);
                div.appendChild(img);
                div.appendChild(p2);
                div.appendChild(p3);
                div.appendChild(p4);
                tableone.appendChild(div);
            });
        })
        .catch(error => console.error(error));
    </script>
</head>
<body>
    <!-- header -->
    <header class="header">
        <div class="nav">
            <div class="title">
                <u>OYSTER @ NYC</u><br>
                <br>
                Exploring sociological changes in NYC through variations of oyster dishes from the 1840s to the present.
            </div>
            <div id="oyster">
                <img id="oy" src="./imgs/oyster.jpg" class="oyster">
            </div>
        </div>
    </header>

    <!-- navigation -->
    <div class="popup" id="nav-popup">
        <div class="popup-title-flex">
            <div id="popup-title"><u>Navigation<br><br></u></div>
            <div>
                <img src="./imgs/close.svg" id="navclose" class="close">
            </div>
        </div>
        <div class="nav-flex">
            <button id="about"><em>About</em></button>
            <div class="dt-line"></div>
            <button id="history"><em>History</em></button>
            <div class="dt-line"></div>
            <button id="data"><em>Data Source</em></button>
            <div class="dt-line"></div>
            <button id="resource"><em>Resources</em></button>
        </div>
        <div class="line"></div><br>
        <div class="text" id="aboutt">
            Oysters @ NYC is a project that delves into the city’s cultural and sociological significance of oysters. Drawing upon data from the New York Public Library's <em>“What's on the Menu”</em> collection, this website pays tribute to a once-revered delicacy rendered inaccessible due to pollution and the city's ever-expanding shoreline. It offers insightful perspectives into the transformation of New York City's demographics and food culture over time by exploring the evolution of various oyster dishes from the 1840s to the present. Through analyzing the popularity of certain oyster variations, the project uncovers the migration and settlement patterns of diverse ethnic and national groups that have contributed to the city's vibrant culinary landscape. The use of P5.js for visualizing the project enhances the overall user experience, making it both engaging and informative.
        </div>
        <div class="text" id="historyt">
            Oysters have been an important part of the history of New York City, with a legacy dating back to the time of the Lenape Indians who harvested them from the local waters. By the 19th century, oysters had become a cheap and plentiful food source for the working-class residents of the city, with oyster stands and restaurants lining the streets. Oysters were so abundant in New York Harbor that it was known as the "oyster capital of the world."<br>
            <br>
            <img src="./imgs/Museum-Of-The-City-Of-New-York-NYC-Untapped-Cities-Oysters-New-York-At-Its-Core4.jpg" class="img">
            <br>
            <div class="annotate">
                <em>Oyster men in their prime</em>
            </div>
            <br>
            However, the population of the city grew rapidly, leading to pollution from sewage and industrial waste, which eventually led to the depletion of the oyster population. Over-harvesting also contributed to the decline of oysters in the region. The last oyster bed in New York Harbor was closed in the 1920s due to pollution.<br>
            <br>
            In recent years, there has been a growing interest in restoring the oyster population in New York Harbor as a means of improving water quality and enhancing the local ecology. Efforts are underway to reintroduce oysters to the harbor and to educate the public about the importance of sustainable practices in protecting the environment.<br>
            <br>
            The story of oysters in New York City is a reminder of the interdependence between humans and the natural world and highlights the importance of preserving the environment for future generations.
        </div>
        <div class="text" id="datat">
            Data used in this project is from <a href="https://menus.nypl.org">New York Public Library's <em>"What's on the Menu?"</em></a> collection where they transcribed all historical menu from the 1840s to the present.<br>
            <br>
            Hypotheses and explanation of data come from <a href="https://en.wikipedia.org/wiki/The_Big_Oyster:_History_on_the_Half_Shell">Mark Kurlansky's <em>The Big Oyster: History on the Half Shell</em></a>.
        </div>
        <div class="text" id="resourcet">
            Below are some resources you can look into if you're interested in donating to oyster conservation projects in New York City:<br><br>

            <strong>1. <a href="https://www.billionoysterproject.org">Billion Oyster Project</a></strong><br>
            <br>
            A New York City-based nonprofit organization with the goal of engaging one million people in the effort to restore one billion oysters to New York Harbor by 2035.<br>
            <br>
            <img src="./20180716-Billion-Oyster-Project.jpeg" class="img"><br>
            <br>
            <strong>2. <a href="https://www.dec.ny.gov/outdoor/110939.html">Restore New York Shellfish</a></strong><br><br>
            <strong>3. <a href="https://hudsonriverpark.org/the-park/parks-river-project/science/current-research/oysters/">The Tribeca Habitat Enhancement Project</a></strong>
        </div>
    </div>  

    <!-- search bar -->
    <div class="searchbar">
        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search a specific dish or filter by year" title="search">
    </div>

    <!-- filter -->
    <div class="filtersystem">
        <button class="filter" id="all">All</button>
        <button class="filter" id="seg1">1851 – 1859</button>
        <button class="filter" id="seg2">1860 – 1880</button>
        <button class="filter" id="seg3">1881 – 1901</button>
        <button class="filter" id="seg4">1902 – 1922</button>
        <button class="filter" id="seg5">1923 – 1943</button>
        <button class="filter" id="seg6">1944 – 1964</button>
        <button class="filter" id="seg7">1965 – 1985</button>
        <button class="filter" id="seg8">1986 – 2006</button>
    </div>

    <!-- data display -->
    <div id="tableone" class="tableone"></div>

    <script>
        // interaction for navigation pop up
        var navClick = document.getElementById('oy');
        var navPopup = document.getElementById('nav-popup');
        var closeNav = document.getElementById('navclose');

        var aboutBttn = document.getElementById('about');
        var historyBttn = document.getElementById('history');
        var dataBttn = document.getElementById('data');
        var resBttn = document.getElementById('resource');

        var aboutText = document.getElementById('aboutt');
        var historyText = document.getElementById('historyt');
        var dataText = document.getElementById('datat');
        var resText = document.getElementById('resourcet');

        navClick.addEventListener("click", function() {
            navPopup.style.display = "block";
        });

        closeNav.addEventListener("click", function() {
            navPopup.style.display = "none";
        });

        aboutBttn.addEventListener("click", function() {
            if (aboutText.style.display === "none") {
                aboutText.style.display = "block";
            } else {
                aboutText.style.display = "none";
            }
            historyText.style.display = "none";
            dataText.style.display = "none";
            resText.style.display = "none";

            aboutBttn.style.opacity = "1";
            historyBttn.style.opacity = ".5";
            dataBttn.style.opacity = ".5";
            resBttn.style.opacity = ".5";
        });

        historyBttn.addEventListener("click", function() {
            if (historyText.style.display === "none") {
                historyText.style.display = "block";
            } else {
                historyText.style.display = "none";
            }
            aboutText.style.display = "none";
            dataText.style.display = "none";
            resText.style.display = "none";

            aboutBttn.style.opacity = ".5";
            historyBttn.style.opacity = "1";
            dataBttn.style.opacity = ".5";
            resBttn.style.opacity = ".5";
        });

        dataBttn.addEventListener("click", function() {
            if (dataText.style.display === "none") {
                dataText.style.display = "block";
            } else {
                dataText.style.display = "none";
            }
            aboutText.style.display = "none";
            historyText.style.display = "none";
            resText.style.display = "none";

            historyBttn.style.opacity = ".5";
            aboutBttn.style.opacity = ".5";
            dataBttn.style.opacity = "1";
            resBttn.style.opacity = ".5";
        });

        resBttn.addEventListener("click", function() {
            if (resText.style.display === "none") {
                resText.style.display = "block";
            } else {
                resText.style.display = "none";
            }
            aboutText.style.display = "none";
            historyText.style.display = "none";
            dataText.style.display = "none";

            historyBttn.style.opacity = ".5";
            aboutBttn.style.opacity = ".5";
            dataBttn.style.opacity = ".5";
            resBttn.style.opacity = "1";
        });
    </script>
</body>
</html>